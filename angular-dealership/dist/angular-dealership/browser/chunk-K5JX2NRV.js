import{a as b}from"./chunk-LOD6BFC4.js";import{a as N,b as n,c as g,d as D,g as I,i as S,j as y,l as E,m as A,n as R}from"./chunk-GGLY7FF4.js";import{E as v,G as i,H as e,I as m,K as s,N as a,da as f,ha as h,ja as C,ma as F,u,v as l,x as p}from"./chunk-UUQ4PDQR.js";var x=class c{constructor(o,r,t,d){this.carService=o;this.router=r;this.route=t;this.fb=d;this.carForm=this.fb.group({brandName:["",n.required],modelName:["",n.required],country:["",n.required],price:["",[n.required,n.pattern(/^\d+(\.\d{1,2})?$/)]],productionYear:["",[n.required,n.pattern(/^\d{4}$/)]],dealershipID:["",n.required]})}carForm;uuid="";ngOnInit(){this.route.params.subscribe(o=>{let r=this.route.parent?.snapshot.paramMap.get("dealershipID"),t=o.carID;if(console.log("Dealership ID:",r),console.log("Car ID:",t),!r||!t){console.error("Dealership ID or Car ID not found in the URL!");return}this.carForm.patchValue({dealershipID:r})})}resetForm(){let o=this.carForm.get("dealershipID")?.value;this.carForm.reset({dealershipID:o})}onSubmit(){console.log("Form status:",this.carForm.status),console.log("Form values:",this.carForm.value);let o=+this.carForm.value.price,r=+this.carForm.value.productionYear,t=this.route.parent?.snapshot.paramMap.get("dealershipID"),d=this.route.snapshot.paramMap.get("carID");if(!t||!d){console.error("Dealership UUID or Car UUID is missing from the URL!");return}this.carForm.patchValue({price:o,productionYear:r}),this.carForm.valid?(console.log("Submitting form..."),this.carService.addCar(t,d,this.carForm.value.brandName,this.carForm.value.modelName,this.carForm.value.country,o,r).subscribe(()=>{console.log("Car added successfully!"),this.router.navigate(["/dealerships"])})):console.warn("Form is invalid!")}static \u0275fac=function(r){return new(r||c)(l(b),l(C),l(h),l(E))};static \u0275cmp=p({type:c,selectors:[["app-car-add"]],decls:42,vars:1,consts:[[1,"container",3,"submit","formGroup"],[1,"row"],[1,"col-4","p-2"],["for","name"],["id","brandName","name","brandName","type","text","formControlName","brandName"],["for","modelName"],["id","modelName","name","modelName","type","text","formControlName","modelName"],["for","country"],["id","country","name","country","type","text","formControlName","country"],["for","productionYear"],["id","productionYear","name","productionYear","formControlName","productionYear"],["for","price"],["id","price","name","price","formControlName","price"],[1,"col-2","p-2"],["type","submit"],["type","button",3,"click"]],template:function(r,t){r&1&&(i(0,"article")(1,"header")(2,"h2"),a(3,"Add Car"),e()(),i(4,"form",0),s("submit",function(){return t.onSubmit()}),i(5,"div",1)(6,"div",2)(7,"div")(8,"label",3),a(9,"Brand name:"),e(),m(10,"input",4),e()()(),i(11,"div",1)(12,"div",2)(13,"div")(14,"label",5),a(15,"Model name:"),e(),m(16,"input",6),e()()(),i(17,"div",1)(18,"div",2)(19,"div")(20,"label",7),a(21,"Production country:"),e(),m(22,"input",8),e()()(),i(23,"div",1)(24,"div",2)(25,"div")(26,"label",9),a(27,"Production year:"),e(),m(28,"input",10),e()()(),i(29,"div",1)(30,"div",2)(31,"div")(32,"label",11),a(33,"Price:"),e(),m(34,"input",12),e()()(),i(35,"div",1)(36,"div",13)(37,"button",14),a(38,"Add Car"),e()(),i(39,"div",13)(40,"button",15),s("click",function(){return t.resetForm()}),a(41,"Reset"),e()()()()()),r&2&&(u(4),v("formGroup",t.carForm))},dependencies:[f,F,A,I,N,g,D,R,S,y],encapsulation:2})};export{x as CarsAddComponent};
