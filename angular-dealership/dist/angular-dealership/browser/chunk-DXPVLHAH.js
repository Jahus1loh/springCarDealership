import{a as E}from"./chunk-LOD6BFC4.js";import{a as U,c as I,d as V,e as D,f as W,g as T,h as Y,k as P,m as R}from"./chunk-GGLY7FF4.js";import{B as x,E as b,G as i,H as o,J as w,K as f,L as d,N as l,R as u,S as p,T as g,a as _,ca as M,da as S,ha as v,ja as N,o as c,p as s,u as m,v as h,x as y}from"./chunk-UUQ4PDQR.js";function B(C,r){if(C&1){let t=w();i(0,"article")(1,"header")(2,"h2"),l(3,"Edit Car"),o()(),i(4,"form",1),f("ngSubmit",function(){c(t);let e=d();return s(e.onSubmit())}),i(5,"div",2)(6,"div",3)(7,"label",4),l(8,"Brand name:"),o(),i(9,"input",5),g("ngModelChange",function(e){c(t);let n=d();return p(n.car.brandName,e)||(n.car.brandName=e),s(e)}),o()()(),i(10,"div",2)(11,"div",3)(12,"label",6),l(13,"Model name:"),o(),i(14,"input",7),g("ngModelChange",function(e){c(t);let n=d();return p(n.car.modelName,e)||(n.car.modelName=e),s(e)}),o()()(),i(15,"div",2)(16,"div",3)(17,"label",8),l(18,"Country:"),o(),i(19,"input",9),g("ngModelChange",function(e){c(t);let n=d();return p(n.car.country,e)||(n.car.country=e),s(e)}),o()()(),i(20,"div",2)(21,"div",3)(22,"label",10),l(23,"Production year:"),o(),i(24,"input",11),g("ngModelChange",function(e){c(t);let n=d();return p(n.car.productionYear,e)||(n.car.productionYear=e),s(e)}),o()()(),i(25,"div",2)(26,"div",3)(27,"label",12),l(28,"Price:"),o(),i(29,"input",13),g("ngModelChange",function(e){c(t);let n=d();return p(n.car.price,e)||(n.car.price=e),s(e)}),o()()(),i(30,"div",2)(31,"div",14)(32,"button",15),l(33,"Update"),o()(),i(34,"div",14)(35,"button",16),f("click",function(){c(t);let e=d();return s(e.resetForm())}),l(36,"Reset"),o()()()()()}if(C&2){let t=d();m(9),u("ngModel",t.car.brandName),m(5),u("ngModel",t.car.modelName),m(5),u("ngModel",t.car.country),m(5),u("ngModel",t.car.productionYear),m(5),u("ngModel",t.car.price)}}var q=class C{constructor(r,t,a){this.carService=r;this.route=t;this.router=a}dealershipUuid;carUuid;car={id:"",brandName:"",modelName:"",country:"",productionYear:0,price:0,dealershipID:""};original;ngOnInit(){this.dealershipUuid=this.route.parent?.snapshot.paramMap.get("dealershipID")||void 0,this.carUuid=this.route.snapshot.paramMap.get("carID")||void 0,console.log("Dealership UUID:",this.dealershipUuid),console.log("Car UUID:",this.carUuid),this.dealershipUuid&&this.carUuid?this.carService.getCar(this.dealershipUuid,this.carUuid).subscribe({next:r=>{r?(this.car={id:r.id,brandName:r.brandName,modelName:r.modelName,country:r.country,productionYear:r.productionYear,price:r.price,dealershipID:r.dealershipID},this.original=_({},this.car)):console.error("Car data is null or undefined")},error:r=>{console.error("Failed to fetch car data:",r)}}):console.error("Dealership UUID or Car UUID is missing!")}onSubmit(){this.carUuid&&this.dealershipUuid&&this.car&&this.carService.putCar(this.dealershipUuid,this.carUuid,this.car).subscribe(()=>{this.router.navigate([`/dealerships/${this.dealershipUuid}/cars`])})}resetForm(){this.original&&(this.car=_({},this.original))}static \u0275fac=function(t){return new(t||C)(h(E),h(v),h(N))};static \u0275cmp=y({type:C,selectors:[["app-car-edit"]],decls:1,vars:1,consts:[[4,"ngIf"],[1,"container",3,"ngSubmit"],[1,"row"],[1,"col-4","p-2"],["for","brandName"],["id","brandName","name","brandName","required","",3,"ngModelChange","ngModel"],["for","modelName"],["id","modelName","name","modelName","required","",3,"ngModelChange","ngModel"],["for","country"],["id","country","name","country","required","",3,"ngModelChange","ngModel"],["for","productionYear"],["id","productionYear","name","productionYear","type","number","required","",3,"ngModelChange","ngModel"],["for","price"],["id","price","name","price","type","number","required","",3,"ngModelChange","ngModel"],[1,"col-2","p-2"],["type","submit"],["type","button",3,"click"]],template:function(t,a){t&1&&x(0,B,37,5,"article",0),t&2&&b("ngIf",a.car)},dependencies:[S,M,R,T,U,Y,I,V,P,W,D],encapsulation:2})};export{q as CarsEditComponent};
